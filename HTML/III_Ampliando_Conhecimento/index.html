<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HTML: Recursos especiais</title>
  </head>

  <body>
    <input type="text" id="busca" /><br />
    <p id="descricao">
      A primeira regra de qualquer tecnologia utilizada nos negócios é que a
      automação aplicada a uma operação eficiente aumentará a eficiência. A
      segunda é que a automação aplicada a uma operação ineficiente aumentará a
      ineficiência
    </p>

    <script>
      var searchField = document.getElementById("busca");
      var desacriptionObject = document.getElementById("descricao");
      var textToSearch = desacriptionObject.innerHTML;

      function realizaBusca(busca) {
        const regex = new RegExp(`(${busca})(?!(.(?!<mark>))*</mark>)+`, "ig");
        const ocurrences = textToSearch.match(regex);
        desacriptionObject.innerHTML = textToSearch.replace(
          regex,
          `<mark>${busca}</mark>`
        );
      }

      searchField.addEventListener("keyup", (e) =>
        realizaBusca(e.target.value)
      );
    </script>
  </body>
</html>
